# DJ Zen Eyer Theme - AI Context Guide

## ğŸ¯ **Projeto**
Tema WordPress Headless profissional para DJ Zen Eyer (produtor musical brasileiro), com React 18, TypeScript, Vite, gamificaÃ§Ã£o e integraÃ§Ã£o completa com plataformas de streaming (Spotify, Mixcloud, YouTube).

**VersÃ£o Atual:** 12.1.0 (Production)  
**Data:** 30/10/2025  
**Status:** âœ… Production Ready

---

## ğŸ“ **Arquitetura**

### Backend (WordPress)
functions.php (v12.1.0)
â”œâ”€â”€ Asset enqueue (React + CSS)
â”œâ”€â”€ REST API endpoints (/wp-json/djz/v1/*)
â”œâ”€â”€ Security headers
â”œâ”€â”€ CORS configuration
â””â”€â”€ Custom post types

inc/djz-config.php (v1.2.0) â­ CENTRALIZED CONFIG
â”œâ”€â”€ Social media URLs
â”œâ”€â”€ Site metadata
â”œâ”€â”€ AI context
â”œâ”€â”€ Colors (Tailwind)
â”œâ”€â”€ Analytics IDs
â”œâ”€â”€ Features flags
â””â”€â”€ Contact info

inc/djz-helpers.php
â”œâ”€â”€ djz_config() â†’ getter function
â”œâ”€â”€ djz_social_urls() â†’ social links
â”œâ”€â”€ djz_allowed_origins() â†’ CORS
â”œâ”€â”€ djz_theme_colors_css() â†’ CSS vars
â””â”€â”€ djz_feature_enabled() â†’ features

text

### Frontend (React + Vite)
src/
â”œâ”€â”€ main.tsx â†’ React entry
â”œâ”€â”€ App.tsx â†’ Root component
â”œâ”€â”€ components/
â”‚ â”œâ”€â”€ Hero.tsx
â”‚ â”œâ”€â”€ Player.tsx
â”‚ â”œâ”€â”€ SocialLinks.tsx
â”‚ â””â”€â”€ ...
â”œâ”€â”€ styles/
â”‚ â””â”€â”€ globals.css (Tailwind)
â””â”€â”€ types/
â””â”€â”€ config.ts

vite.config.ts
â”œâ”€â”€ Code splitting (manualChunks)
â”œâ”€â”€ Tree shaking (minify: terser)
â”œâ”€â”€ Asset optimization
â””â”€â”€ Environment variables

dist/ (Build output)
â”œâ”€â”€ .vite/manifest.json
â”œâ”€â”€ js/ (chunks)
â”œâ”€â”€ css/ (optimized)
â””â”€â”€ images/ (compressed)

text

---

## ğŸ”’ **SeguranÃ§a (v12.1.0 - Implementado)**

### CSP Nonce Implementation
**Arquivo:** `functions.php` (linhas 194-201)
// Inline style recebe CSP nonce
echo '<style id="djz-theme-colors" nonce="' . esc_attr(djzeneyer_get_csp_nonce()) . '">'

text
**Por quÃª:** Previne XSS em estilos inline (Content Security Policy)

### REST API Security
**Arquivo:** `functions.php` (linhas 208-252)
// Endpoint pÃºblico retorna APENAS dados pÃºblicos
/wp-json/djz/v1/config â†’ Name, tagline, colors (SEM emails, APIs)

// Endpoint admin retorna DADOS COMPLETOS
/wp-json/djz/v1/admin/config â†’ Requer autenticaÃ§Ã£o (manage_options)

text
**Por quÃª:** Evita exposiÃ§Ã£o de configuraÃ§Ãµes sensÃ­veis

### CORS Configuration
**Arquivo:** `inc/djz-config.php` (linhas 128-132)
'allowed_origins' => [
'https://djzeneyer.com',
'https://www.djzeneyer.com',
'https://app.djzeneyer.com',
// Localhost REMOVIDO (production-only)
]

text
**Por quÃª:** Reduz vetores de ataque, simplifica workflow (GitHub/Bolt/Hostinger)

---

## ğŸ“Š **Configuration Management**

### Single Source of Truth
**Arquivo:** `inc/djz-config.php`

**Para ADICIONAR nova configuraÃ§Ã£o:**
1. Edite `inc/djz-config.php`
2. Adicione nova chave no array
3. Acesse via `djz_config('section.key')`
4. NÃ£o hardcode valores em outros arquivos

**Exemplo:**
// inc/djz-config.php
'analytics' => [
'google_analytics' => 'G-XXXXX', // â† UPDATE AQUI
]

// Acesso no cÃ³digo
$ga_id = djz_config('analytics.google_analytics');

text

---

## ğŸš€ **Deployment Workflow**

VocÃª edita em GitHub/Bolt.new
â†“
Git push para main branch
â†“
Webhook dispara build
â†“
npm run build (Vite)
â†“
Hostinger recebe arquivos
â†“
Site djzeneyer.com atualiza

text

**Importante:** 
- Nenhum desenvolvimento local necessÃ¡rio
- Sem `npm install` ou `git clone` no laptop
- Bolt.new cuida do build automaticamente
- Deploy Ã© instantÃ¢neo apÃ³s commit

---

## ğŸ§ª **Testing Checklist**

### ApÃ³s Update
1. [ ] Commit para GitHub
2. [ ] Aguarde webhook build (~2min)
3. [ ] Abra https://djzeneyer.com
4. [ ] F12 â†’ Console (sem erros)
5. [ ] Rode PageSpeed Insights
6. [ ] Rode Security Headers check

### Testing Tools (Recomendados)
- PageSpeed Insights: `https://pagespeed.web.dev`
- Security Headers: `https://securityheaders.com`
- Schema Validator: `https://validator.schema.org`
- GTmetrix: `https://gtmetrix.com`
- Lighthouse: DevTools (F12)

---

## ğŸ“ **Common Tasks**

### Task 1: Adicionar Social Network
**Arquivo:** `inc/djz-config.php`
'social' => [
'instagram' => 'https://...',
'tiktok' => 'https://...', // â† NOVA REDE
]

text
Commit â†’ Deploy â†’ DisponÃ­vel em `djzConfig.social.tiktok` (JS)

### Task 2: Alterar Cores do Tema
**Arquivo:** `inc/djz-config.php`
'colors' => [
'primary' => '#0A0E27', // â† MUDE AQUI
'accent' => '#3B82F6',
]

text
Commit â†’ Deploy â†’ CSS vars atualizam automaticamente

### Task 3: Habilitar/Desabilitar Feature
**Arquivo:** `inc/djz-config.php`
'features' => [
'gamipress' => false, // â† TOGGLE
]

text
Commit â†’ Deploy â†’ GamiPress desabilitado via `djz_feature_enabled('gamipress')`

### Task 4: Adicionar Analytics
**Arquivo:** `inc/djz-config.php`
'analytics' => [
'google_analytics' => 'G-XXXXX', // â† ID
]

text
Commit â†’ Deploy â†’ Google Analytics ativo

---

## ğŸ”§ **Debugging**

### CSP Issues
Console Error: Refused to load stylesheet
â†’ Verifique se style tag tem nonce="..."
â†’ Veja functions.php linhas 194-201

text

### CORS Errors
Console Error: Access to XMLHttpRequest blocked by CORS
â†’ Verifique if domain estÃ¡ em inc/djz-config.php allowed_origins
â†’ Confirm CORS header em functions.php linhas 107-119

text

### REST API 404
GET /wp-json/djz/v1/config â†’ 404
â†’ Verifique se WordPress estÃ¡ com REST API habilitada
â†’ Verifique se djz-helpers.php estÃ¡ sendo carregado

text

### Build Fails
npm run build â†’ Error
â†’ Veja Vite logs para detalhes
â†’ Verific se vite.config.ts estÃ¡ correto
â†’ Check tsconfig.json strict mode

text

---

## ğŸ“š **Code Snippets for Bolt.new**

### Adicionar Nova Feature Flag
// Em inc/djz-config.php
'features' => [
'minha_feature' => true, // â† NOVA
],

// Em functions.php ou componente
if (djz_feature_enabled('minha_feature')) {
// LÃ³gica aqui
}

text

### Criar Novo REST Endpoint
// Em functions.php, dentro de add_action('rest_api_init')
register_rest_route('djz/v1', '/meu-endpoint', [
'methods' => 'GET',
'callback' => function() {
return rest_ensure_response([
'data' => 'aqui',
]);
},
'permission_callback' => '__return_true', // ou current_user_can()
]);

text

### Acessar Config em React
// src/components/MyComponent.tsx
const config = window.djzConfig; // globalThis via wp_localize_script

console.log(config.siteName);
console.log(config.social.instagram);
console.log(config.colors.primary);

text

---

## ğŸ¯ **PrÃ³ximos Passos (Melhorias Futuras)**

- [ ] Implementar lazy loading com React.lazy()
- [ ] Verificar bundle size (target: <300KB JS, <100KB CSS)
- [ ] Adicionar caching strategy
- [ ] Implementar PWA (Progressive Web App)
- [ ] Adicionar tests (Jest + React Testing Library)
- [ ] Documentar API endpoints com Swagger
- [ ] Implementar CI/CD pipeline completo
- [ ] Adicionar E2E tests (Cypress)

---

## ğŸ“ **Support & Resources**

- **GitHub:** https://github.com/seu-usuario/djzeneyer-theme
- **Site:** https://djzeneyer.com
- **Email:** contato@djzeneyer.com

---

## ğŸ† **Quality Metrics (Target)**

| MÃ©trica | Target | Check Tool |
|---------|--------|-----------|
| Performance Score | 90+ | PageSpeed Insights |
| SEO Score | 95+ | PageSpeed Insights |
| Security Grade | A+ | SecurityHeaders.com |
| Bundle Size JS | <300KB | Vite build analysis |
| Bundle Size CSS | <100KB | Vite build analysis |
| Accessibility | >95 | Lighthouse |
| CSP Compliance | Pass | DevTools Console |
| Schema.org Valid | Yes | Validator.schema.org |

---

**Last Updated:** 30/10/2025 @ 11:50 AM  
**Maintained by:** DJ Zen Eyer Team  
**Status:** âœ… Production Ready