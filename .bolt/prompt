# DJ ZEN EYER - AI ASSISTANT PROMPT

You are assisting with the DJ Zen Eyer website, a high-performance headless WordPress + React application for a 2Ã— World Champion Brazilian Zouk DJ and producer.

## CRITICAL CONTEXT

### Architecture
- **Frontend:** React 18 + Vite 5 + TypeScript + Tailwind CSS (SSG with prerendering)
- **Backend:** WordPress headless (REST API only, no theme rendering)
- **Plugins:** WooCommerce (shop), GamiPress (gamification), Polylang (i18n), MailPoet (newsletter)
- **Infrastructure:** LiteSpeed Cache + Cloudflare CDN

### Key Features
1. **Bilingual (EN/PT):** All routes must exist in both languages (`/` = EN, `/pt` = PT)
2. **Static Site Generation:** HTML pre-rendered for SEO (see `scripts/prerender.js`)
3. **Lazy Loading:** React components code-split for performance
4. **Gamification:** User points, ranks, achievements via GamiPress API
5. **E-commerce:** WooCommerce products consumed via REST API

### Directory Structure
```
/inc/           â†’ WordPress PHP configuration (API, CPT, SEO, cache, security)
/src/           â†’ React application
  /components/  â†’ Reusable UI components
  /pages/       â†’ Route pages (HomePage, ShopPage, etc.)
  /contexts/    â†’ Global state (User, Cart, MusicPlayer)
  /locales/     â†’ i18n translations (en/pt)
/dist/          â†’ Production build output (deploy this folder)
/public/        â†’ Static assets (images, fonts, manifests)
/plugins/       â†’ Custom WordPress plugins
  /zen-seo-lite/    â†’ SEO optimization engine
  /zeneyer-auth/    â†’ JWT authentication + OAuth
  /zen-bit/         â†’ Bandsintown events integration
```

## RULES FOR AI ASSISTANTS

### When Editing PHP (/inc)
- **NEVER** remove CORS headers (breaks React API calls)
- **NEVER** disable `show_in_rest` for CPTs (breaks API access)
- **ALWAYS** maintain bilingual support in API endpoints
- **TEST** WordPress REST API after changes: `/wp-json/djzeneyer/v1/`

### When Editing React (/src)
- **NEVER** hardcode API URLs (use environment variables or config)
- **ALWAYS** handle loading states (Suspense + lazy imports)
- **ALWAYS** add Portuguese translations to `/src/locales/pt/translation.json`
- **NEVER** remove `fetchPriority="high"` from hero images
- **MAINTAIN** lazy loading for pages (see `src/App.tsx`)

### When Editing Styles
- **USE** Tailwind classes (no inline CSS)
- **FOLLOW** design system: spacing (8px grid), colors (from `tailwind.config.js`)
- **ENSURE** responsive breakpoints: `sm:`, `md:`, `lg:`, `xl:`
- **AVOID** purple/indigo colors (client preference: dark + red accents)

### Performance Requirements
- **LCP:** < 1.8s (preload hero image, no render-blocking scripts)
- **CLS:** < 0.05 (explicit image dimensions, no layout shift)
- **Bundle:** < 200KB gzipped (code splitting active)
- **SEO:** All routes must have static HTML with meta tags

### Security
- **CORS:** Only allow `djzeneyer.com` + localhost origins
- **CSP:** Strict Content Security Policy in `.htaccess`
- **HSTS:** HTTPS only (Cloudflare handles SSL)
- **No inline scripts** (except React hydration)

### Language/Translation
- **Detection:** Browser language â†’ redirect to `/pt` if `pt-BR`
- **Storage:** `localStorage` persists user choice
- **URLs:** English = `/about`, Portuguese = `/pt/about`
- **API:** Pass `?lang=pt` to WP endpoints for translated content

### Build & Deploy
1. **Development:** `npm run dev` (Vite dev server at :5173)
2. **Build:** `npm run build` (compiles + prerenders HTML files)
3. **Deploy:** Upload `/dist` folder to server root (not in `/wp-content/themes`)
4. **Cache:** Clear LiteSpeed Cache + Cloudflare after deploy

## COMMON TASKS

### Add New Route
1. Create page in `/src/pages/NewPage.tsx`
2. Add lazy import in `/src/components/AppRoutes.tsx`
3. Add route metadata to `/scripts/prerender.js`
4. Add translations to `en/translation.json` + `pt/translation.json`
5. Rebuild: `npm run build`

### Add New Product Type
1. Register CPT in `/inc/cpt.php`
2. Enable `show_in_rest: true`
3. Create API endpoint in `/inc/api.php` if custom logic needed
4. Consume in React via `fetch()` with proper error handling

### Debug API Issues
1. Check CORS: `curl -H "Origin: https://djzeneyer.com" https://site.com/wp-json/`
2. Verify endpoint: `/wp-json/djzeneyer/v1/products?lang=pt`
3. Check PHP errors: `wp-content/debug.log`
4. Test authentication: verify JWT token or nonce

## CONTACT & BRAND VOICE
- **Artist Name:** DJ Zen Eyer (legal: Marcelo Eyer Fernandes)
- **Tagline:** "A pressa Ã© inimiga da cremosidade" (Haste is the enemy of creaminess)
- **Genre:** Brazilian Zouk (not generic EDM)
- **Tone:** Professional, premium, international appeal
- **Target:** Dancers, event organizers, DJs (B2C + B2B)

## NEVER DO
- âŒ Break bilingual routing
- âŒ Remove lazy loading
- âŒ Disable LiteSpeed Cache rules
- âŒ Add heavy libraries without justification
- âŒ Ignore accessibility (alt texts, ARIA labels)
- âŒ Deploy without building (`npm run build`)
- âŒ Use purple/indigo colors (unless explicitly requested)

## PRIORITY ORDER
1. **Security** (CORS, XSS protection, HTTPS)
2. **Performance** (LCP, bundle size, caching)
3. **SEO** (static HTML, meta tags, structured data)
4. **UX** (loading states, error handling, mobile-first)
5. **Aesthetics** (animations, polish, dark theme consistency)

## AVAILABLE API ENDPOINTS

### Active Endpoints âœ…
- `GET /djzeneyer/v1/menu?lang=en` - Menu structure
- `GET /djzeneyer/v1/products?lang=en` - WooCommerce products
- `POST /djzeneyer/v1/subscribe` - Newsletter subscription
- `POST /djzeneyer/v1/user/update-profile` - Update user profile (auth required)

### Authentication Endpoints âœ…
- `POST /zeneyer-auth/v1/register` - User registration
- `POST /zeneyer-auth/v1/login` - User login (email/password)
- `POST /zeneyer-auth/v1/google` - Google OAuth login
- `GET /zeneyer-auth/v1/validate` - Validate JWT token

### Planned Endpoints ðŸš§
- `/djzeneyer/v1/activity/{user_id}` - User activity feed
- `/djzeneyer/v1/gamipress/{user_id}` - User stats (points, rank)
- `/djzeneyer/v1/streak/{user_id}` - Login streak
- `/djzeneyer/v1/tracks/{user_id}` - Purchased music
- `/djzeneyer/v1/events/{user_id}` - Purchased events

**Note:** Use native GamiPress API as workaround:
- `GET /gamipress/v1/users/{id}/points`
- `GET /gamipress/v1/users/{id}/ranks`
- `GET /gamipress/v1/users/{id}/achievements`

## DOCUMENTATION REFERENCES
- [Architecture](docs/ARCHITECTURE.md)
- [API Reference](docs/API.md)
- [Setup Guide](docs/SETUP.md)
- [Configuration](docs/CONFIGURATION.md)
- [Dev Guide](docs/DEV_GUIDE.md)

---

**For more details:** Check project documentation in `/docs/` folder.
