<!DOCTYPE html>
<html <?php language_attributes(); ?> prefix="og: https://ogp.me/ns# article: https://ogp.me/ns/article#">
<head>
    <meta charset="<?php bloginfo('charset'); ?>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0A0E27">
    
    <!-- Favicons (Otimizado) -->
    <link rel="icon" type="image/svg+xml" href="<?php echo get_template_directory_uri(); ?>/favicon.svg">
    <link rel="icon" type="image/png" sizes="96x96" href="<?php echo get_template_directory_uri(); ?>/favicon-96x96.png">
    <link rel="shortcut icon" href="<?php echo get_template_directory_uri(); ?>/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="<?php echo get_template_directory_uri(); ?>/apple-touch-icon.png">
    <meta name="apple-mobile-web-app-title" content="DJ Zen Eyer">
    <link rel="manifest" href="<?php echo get_template_directory_uri(); ?>/site.webmanifest">
    
    <!-- Performance Optimization -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <?php
    // Carrega React App dinamicamente
    $dist_path = get_template_directory() . '/dist';
    $dist_url = get_template_directory_uri() . '/dist';
    
    // Verifica se existe manifest.json
    $manifest_file = $dist_path . '/manifest.json';
    if (file_exists($manifest_file)) {
        $manifest = json_decode(file_get_contents($manifest_file), true);
        $main_js = $manifest['src/main.jsx']['file'] ?? 'assets/index.js';
    } else {
        // Fallback: procura por index-*.js
        $js_files = glob($dist_path . '/assets/index-*.js');
        $main_js = !empty($js_files) ? 'assets/' . basename($js_files[0]) : 'assets/index.js';
    }
    ?>
    
    <script type="module" crossorigin src="<?php echo $dist_url . '/' . $main_js; ?>"></script>
    
    <?php wp_head(); ?>
</head>
<body <?php body_class(); ?>>
    <?php wp_body_open(); ?>
    
    <div id="root"></div>
