# üîß HOTFIX - 15 Janeiro 2026

## Erros Corrigidos

### 1. Fatal Error: Fun√ß√£o Duplicada ‚ùå ‚Üí ‚úÖ

**Erro:**
```
Fatal error: Cannot redeclare djz_get_gamipress_points_type_slug()
(previously declared in inc/setup.php:19) in inc/setup.php on line 119
```

**Causa:**
A fun√ß√£o `djz_get_gamipress_points_type_slug()` estava declarada **duas vezes** no arquivo `inc/setup.php`:
- **Primeira declara√ß√£o:** Linhas 19-36
- **Segunda declara√ß√£o (duplicada):** Linhas 119-136

**Solu√ß√£o:**
Removida a segunda declara√ß√£o duplicada (linhas 116-136).

**Arquivo modificado:** `inc/setup.php`

---

### 2. Notice: Tradu√ß√µes do WooCommerce ‚ö†Ô∏è ‚Üí ‚úÖ

**Erro:**
```
Notice: Function _load_textdomain_just_in_time was called incorrectly.
Translation loading for the woocommerce domain was triggered too early.
```

**Causa:**
O WooCommerce estava tentando carregar tradu√ß√µes antes da a√ß√£o `init`, causando conflitos com o WordPress 6.7+.

**Solu√ß√£o:**
Adicionado hook `init` com prioridade `0` para carregar o text domain do tema **antes** do WooCommerce:

```php
add_action('init', function() {
    load_theme_textdomain('djzeneyer', get_template_directory() . '/languages');
}, 0);
```

**Arquivo modificado:** `inc/setup.php`

---

## Valida√ß√£o

Todos os arquivos PHP foram validados com `php -l`:

‚úÖ `functions.php` - OK
‚úÖ `inc/setup.php` - OK
‚úÖ `inc/api.php` - OK
‚úÖ `inc/cpt.php` - OK
‚úÖ `inc/spa.php` - OK
‚úÖ `inc/csp.php` - OK

---

## Pr√≥ximos Passos

1. **Fazer upload do arquivo corrigido:**
   ```bash
   # Via SFTP/FTP, substituir:
   /wp-content/themes/zentheme/inc/setup.php
   ```

2. **Limpar cache do WordPress:**
   - WP Admin ‚Üí Plugins ‚Üí LiteSpeed Cache ‚Üí Purge All
   - Ou via SSH:
     ```bash
     wp cache flush
     ```

3. **Limpar cache do Cloudflare:**
   - Dashboard Cloudflare ‚Üí Caching ‚Üí Purge Everything

4. **Verificar site:**
   - Acessar: https://djzeneyer.com
   - Verificar console do navegador (F12) se n√£o h√° erros JavaScript
   - Testar login/logout
   - Verificar dashboard do usu√°rio

5. **Monitorar logs:**
   ```bash
   tail -f /home/u790739895/domains/djzeneyer.com/public_html/wp-content/debug.log
   ```

---

## Arquivos Modificados

```diff
inc/setup.php
+ Linha 132-134: Adicionado load_theme_textdomain no hook 'init'
- Linhas 116-136: Removida fun√ß√£o duplicada djz_get_gamipress_points_type_slug()
```

---

## Status Final

üü¢ **RESOLVIDO** - Site deve estar funcionando normalmente
üìÖ **Data:** 15 Janeiro 2026
‚úçÔ∏è **Por:** AI Assistant (Claude)

---

## Backup

Antes de fazer qualquer deploy, sempre fa√ßa backup:

```bash
# Backup do tema completo
cd /home/u790739895/domains/djzeneyer.com/public_html/wp-content/themes/
tar -czf zentheme-backup-$(date +%Y%m%d-%H%M%S).tar.gz zentheme/

# Backup do banco de dados
wp db export backup-$(date +%Y%m%d-%H%M%S).sql
```

---

**IMPORTANTE:** Teste em ambiente de staging primeiro, se dispon√≠vel!
